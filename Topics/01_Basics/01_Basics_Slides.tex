\documentclass{beamer} % [aspectratio=169]
\usetheme{ucl}
\setbeamercolor{banner}{bg=brightblue}
\setbeamersize{description width=2em}
\setbeamertemplate{navigation symbols}{\vspace{-2ex}} 

\usepackage[T1]{fontenc} % Turn Â£ into $
\usepackage{minted}
\usemintedstyle{emacs}

\usepackage{verbatim}
\usepackage{xcolor}
\usepackage{url}

\usepackage{natbib}
\usepackage{bibentry}

\AtBeginSection[]{
  \begin{frame}
  \vfill
  \centering
  \begin{beamercolorbox}[sep=8pt,center,shadow=true,rounded=true]{title}
    \usebeamerfont{title}\insertsectionhead\par%
  \end{beamercolorbox}
  \vfill
  \end{frame}
}

\author{Prof.\ George Danezis}
\title{Basics of Computer Programming \\ \& Software Engineering.}
\subtitle{ENGS102P: Design and Professional Skills }
\institute{University College London, UK}
\date{Term 1, 2017}


\begin{document}
\nobibliography*


\frame{
\titlepage
}

\section{Introduction}

\frame{
\frametitle{What is Computer Science \& Software Enginnering?}
} 

\frame{
\frametitle{Programming and \& languages.} 
}

\frame{
\frametitle{Why Python?} 
}

\frame{
\frametitle{Using Python interactively.} 
}

\frame{
\frametitle{The `Hello World!' program in Python.} 
}

\frame{
\frametitle{The `Hello World!' program in Python.} 

A simple Python program:

	\inputminted[
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/hello_world.py}
}

\begin{frame}
\frametitle{How do we know a program does what it should?}
\end{frame}

\frame{
\frametitle{Testing the `Hello World!' program.} 

The test of the simple Python program:

	\inputminted[
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/test_hello_world.py}

}

\frame{
\frametitle{Testing the `Hello World!' program } 

A simple Python program, with a docstring test:

	\inputminted[
		xleftmargin=1.4em,
		highlightlines={6-7},
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize, 
		linenos
	]{python}{src/hello_world_doc.py}

}

\section{Algorithms \& Python}

\begin{frame}
\frametitle{What is an `algorithm'.} 
\end{frame}

\begin{frame}
\frametitle{Euclid's algorithm for computing the GCD.} 
\end{frame}


\begin{frame}

\frametitle{Calculations following Euclid's algorithm for GCD.} 


	\inputminted[
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/interactive_euclid.py}

\end{frame}

\begin{frame}
\frametitle{Assignments, values, operations.}
\end{frame}

\begin{frame}
\frametitle{Value types, and integers.}
\end{frame}

\begin{frame}
\frametitle{Types \& Programming Languages.}
\end{frame}


\begin{frame}

\frametitle{Controlling the execution of programs.} 
\end{frame}

\begin{frame}

\frametitle{Automatic program control for Euclid's algorithm.} 


	\inputminted[
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/subtraction_euclid.py}

\end{frame}

\begin{frame}

\frametitle{Loops, and the while control structure.} 
\end{frame}

\begin{frame}

\frametitle{Conditional execution with the if control structure.} 
\end{frame}


\begin{frame}
\frametitle{Euclid as a function} 


	\inputminted[
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/subtraction_function_euclid.py}

\end{frame}

\begin{frame}
\frametitle{Re-using code through functions.}
\end{frame}

\begin{frame}
\frametitle{The `scope' of variables.}
\end{frame}


\begin{frame}
\frametitle{The DRY principle.}
\end{frame}

\begin{frame}
\frametitle{Euclid as a function and unit test} 

	\inputminted[
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/subtraction_function_euclid_test.py}

\end{frame}


\begin{frame}
\frametitle{What makes a good test?}
\end{frame}

\begin{frame}
\frametitle{When to write the test?}
\end{frame}


\begin{frame}
\frametitle{The `happy path', errors and exceptions.}
\end{frame}

\begin{frame}
\frametitle{Raising an exception upon error.} 

	\inputminted[
		highlightlines={3-4},
		firstline=1,
		lastline=10,
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/subtraction_function_euclid_exc.py}

\end{frame}

\begin{frame}
\frametitle{How to test \& handle exceptions.}

	\inputminted[
		firstline=19,
		lastline=29,
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/subtraction_function_euclid_exc.py}

\end{frame}

\begin{frame}
\frametitle{The try / except / finally control structure.}
\end{frame}


\begin{frame}
\frametitle{Detect errors at a low level, handle them at a high level.}
\end{frame}


\begin{frame}
\frametitle{Idiomatic pytest.}

	\inputminted[
		firstline=31,
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/subtraction_function_euclid_exc.py}

\end{frame}


\begin{frame}
\frametitle{The practice of refactoring.}
\end{frame}

\section{Algorithmic complexity}

\begin{frame}
\frametitle{How many iterations does the GCD algorithm take?}
\end{frame}


\begin{frame}
\frametitle{Euclid's algorithm using modulo operation (\%).}

	\inputminted[
		lastline=14,
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/mod_function_euclid_exc.py}

\end{frame}

\begin{frame}
\frametitle{Cost of modulo and multiple assignment?}
\end{frame}


\begin{frame}
\frametitle{Understanding the int type.}
\end{frame}

\section{Algorithms on `real' numbers}

\begin{frame}
\frametitle{The float type and float variables}
\end{frame}

\begin{frame}
\frametitle{How to test a square root function.}

	\inputminted[
		lastline=14,
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/sqrt_dummy.py}

\end{frame}

\begin{frame}
\frametitle{Heron's method for computing square roots}
\end{frame}

\begin{frame}
\frametitle{Heron's method.}

	\inputminted[
		firstline=18,
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/sqrt.py}

\end{frame}

\begin{frame}
\frametitle{The problem of termination \& infinite loops.}
\end{frame}

\begin{frame}
\frametitle{Will Heron's method terminate?}

Lemma 1. Heron's approximation to the square root bounds the square root from above. Namely, $\forall x, g. \qquad \frac{1}{2}(g + \frac{x}{g}) \geq \sqrt{x}$.
Proof. $\Rightarrow g^2 - 2g\sqrt{x}+(\sqrt{x})^2 \geq 0$ 
$\Rightarrow (\sqrt{x} - g)^2 \geq 0$. QED.

Theorem 1. Subsequent approximations $g_{i+1} = \frac{1}{2} (g_i + \frac{x}{g_i})$ approximate $\sqrt{x}$ increasingly better. Namely, $|g_{i+1} - \sqrt{x}| < |g_{i} - \sqrt{x}|$. (Where $g_0 = \frac{1}{2}(x + 1)$).
Proof. (Due to lemma 1.) 
$\Rightarrow g_{i+1} - \sqrt{x} < g_{i} - \sqrt{x}$
$\Rightarrow g_{i+1} < g_{i}$
$\Rightarrow \frac{1}{2} (g_i + \frac{x}{g_i}) < g_{i}$
$\Rightarrow g_i^2 + (\sqrt{x})^2 < 2g_i^2$
$\Rightarrow 0 < g_i^2 - (\sqrt{x})^2$
$\Rightarrow 0 < (g_i - \sqrt{x})(g_i + \sqrt{x})$. True by lemma 1. QED.
\end{frame}

\begin{frame}
\frametitle{Ensure progress.}

	\inputminted[
		firstline=31,
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/sqrt_assert.py}

\end{frame}

\begin{frame}
\frametitle{Check invariants within your program.}

Different from runtime exceptions.
\end{frame}


\begin{frame}
\frametitle{Understanding float precision.}

	\inputminted[
		firstline=12,
		lastline=28,
		xleftmargin=1.4em,
		frame=lines,
		framesep=2mm,
		%baselinestretch=1.2,
		% bgcolor=lightgray,
		fontsize=\footnotesize,
		linenos
	]{python}{src/sqrt_assert.py}

\end{frame}

\begin{frame}
\frametitle{Always prefer built in functions and standard libraries.}

Do \mint{python}{x ** 0.5}

\end{frame}

\begin{frame}
\frametitle{Understanding functions.}
\end{frame}



% ---------------------------------

\section{Cruft}

\begin{frame}[fragile]
\frametitle{Verbatim environments} 

How to run tests:
\begin{minted}{bash}
$ pytest -vs --doctest-modules
\end{minted}

\vspace{5mm}  

The example of a Verbatim fragment:
\scriptsize %change the font size. You can \scriptsize to get a smaller font.
\begin{verbatim}
============================= test session starts =============================
platform win32 -- Python 3.5.3, pytest-3.2.1, py-1.4.34, pluggy-0.4.0 -- 
c:\users\george\appdata\local\programs\python\python35\python.exe
cachedir: .cache
rootdir: C:\Users\george\Desktop\projects\Design_and_Professional_Skills\
Docs\pipeline, inifile:
collecting ... collected 2 items

hello_world_doc.py::hello_world_doc.hello_world PASSED
test_hello_world.py::test_hello_world PASSED

========================== 2 passed in 0.26 seconds ===========================
\end{verbatim}

\end{frame}

\begin{frame}
\frametitle{Inline references}

\bibentry{kernighan1999practice}

\end{frame}

\bibliographystyle{alpha}
\nobibliography{references}

\end{document}